<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Admin">
	<!-- 수지 / 전체회원수 구하기 -->
	<select id="getAllMemberCount" resultType="int">
		select count(*) from
		member where not id='administrator'
	</select>

	<!-- by 지은, 회원정보 리스트 rnum 적용해서 전체회원정보 뽑기 -->
	<select id="memberList" resultType="coma.spring.dto.MemberDTO">
		select * from (select
		member.*, row_number() over(order by 1 desc) rnum from
		member where not
		id='administrator') where rnum between #{start} and
		#{end}
	</select>

	<!-- by 지은, 회원관리 옵션순으로 회원정보 출력하기 -->
	<select id="selectByOption"
		resultType="coma.spring.dto.MemberDTO">
		select * from (select
		member.*, row_number() over(order by
		${targetColumn} desc) rnum from
		member) where rnum between #{start} and
		#{end}
	</select>

	<!-- by 지은, 회원탈퇴 처리하기 -->
	<delete id="memberOut">
		delete from member where id in
		<foreach collection="checkList" item="i" open="("
			close=")" separator=",">
			#{i.value}
		</foreach>
	</delete>

	<!-- by 수지, 모임글 리스트 뽑기 -->
	<select id="partyList" resultType="coma.spring.dto.PartyDTO">
		select * from (select
		party.*,
		row_number() over(order by 1 desc) rnum from
		party) where rnum between
		#{start} and
		#{end}
	</select>

	<!-- by 수지, 모임글 옵션순으로 회원정보 출력하기 -->
	<select id="partyByOption" resultType="coma.spring.dto.PartyDTO">
		select * from (select
		party.*, row_number() over(order by
		${targetColumn} desc) rnum from
		party) where rnum between #{start} and
		#{end}
	</select>

</mapper>